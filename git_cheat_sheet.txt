# get the current status
git status

# stage all changes
git add .

# unstage everything
git restore -- staged .

# recursively list all files in current commit, with full paths, file sizes (bytes), sorted by 4th field / size, numeric, descending and aligned into columns.
git ls-tree -r -t -l --full-name HEAD | sort -k4 -nr | column -t

# list all object in history, type, hash, size (bytes), path, descend by size (2nd field), top 10.
git rev-list --objects --all | git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' | sed -n 's/^blob //p' | sort --numeric-sort --key=2 | tail -n 10

# remove from history
git filter-repo --path Sim Model --invert-paths

# in admin powershell: forced garbage collection (deleting emtpy directories), which failed in git bash (git gc) because of read-only permissions.
# lists every subdir of .git/objects, loops through and clears read-only flag, force-deletes all objects (only if empty will it succeed) and run git gc.
Get-ChildItem .git/objects -Directory | 
ForEach-Object { 
  $_.Attributes = $_.Attributes -band (-bnot [System.IO.FileAttributes]::ReadOnly); 
  Remove-Item $_.FullName -Recurse -Force -ErrorAction SilentlyContinue 
}
git gc --prune=now
# this literally corrupted my repo fml

